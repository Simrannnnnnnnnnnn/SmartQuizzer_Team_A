{% extends "base.html" %}

{% block content %}
<div class="container py-5 animate__animated animate__fadeIn">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
            <h1 class="fw-bold" style="color: var(--primary-gold);">‚ú® Your AI Study Bundle</h1>
            <p class="text-muted">Mastered through Mnemonics, Flashcards, and Shorthand Notes.</p>
        </div>
        <div class="d-flex gap-2">
            <button onclick="window.print()" class="btn btn-outline-primary rounded-pill px-4">
                <i class="fa-solid fa-print me-2"></i>Save PDF
            </button>
            <a href="{{ url_for('routes.study_hub') }}" class="btn btn-warning text-white rounded-pill px-4">
                <i class="fa-solid fa-arrow-left me-2"></i>New Session
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-7">
            <div class="glass-card p-4 mb-4 border-top-gold shadow-sm">
                <h4 class="fw-bold mb-4"><i class="fa-solid fa-file-lines text-warning me-2"></i>Shorthand Revision Notes</h4>
                <ul class="list-group list-group-flush">
                    {% for note in data.shorthand_notes %}
                    <li class="list-group-item bg-transparent border-0 d-flex align-items-start mb-2">
                        <i class="fa-solid fa-circle-check text-success mt-1 me-3"></i>
                        <span>{{ note }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="glass-card p-4 shadow-sm mb-4" style="background: #FFFDF5; border-left: 6px solid #FFB300;">
                <h4 class="fw-bold mb-3"><i class="fa-solid fa-brain text-danger me-2"></i>Memory Palace & Mnemonic</h4>
                <div class="p-3 bg-white rounded-4 border shadow-sm" style="font-size: 1.1rem; line-height: 1.8; color: #444;">
                    {{ data.mnemonic_story }}
                </div>
            </div>
            
            <div class="glass-card p-4 shadow-sm border-0" style="background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);">
                <h5 class="fw-bold mb-3">üí° Pro Study Tips</h5>
                <div class="row">
                    <div class="col-md-6 mb-2">
                        <small class="text-muted d-block"><strong>Pomodoro:</strong> Study for 25 mins, rest for 5.</small>
                    </div>
                    <div class="col-md-6 mb-2">
                        <small class="text-muted d-block"><strong>Feynman Technique:</strong> Explain this topic to a friend.</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-5">
            <h4 class="fw-bold mb-4 text-center"><i class="fa-solid fa-layer-group text-primary me-2"></i>Active Recall Flashcards</h4>
            <div class="flashcard-stack custom-scrollbar" style="max-height: 800px; overflow-y: auto; padding-right: 10px;">
                {% for card in data.flashcards %}
                <div class="flashcard mb-4" onclick="this.classList.toggle('flipped')">
                    <div class="flashcard-inner">
                        <div class="flashcard-front d-flex flex-column align-items-center justify-content-center p-4">
                            <span class="badge rounded-pill bg-light text-dark border mb-3">Concept</span>
                            <h5 class="fw-bold text-center">{{ card.front }}</h5>
                            <small class="text-muted mt-3">Click to reveal answer üëÜ</small>
                        </div>
                        <div class="flashcard-back d-flex flex-column align-items-center justify-content-center p-4">
                            <span class="badge rounded-pill bg-white text-warning mb-3">Explanation</span>
                            <p class="text-center fs-6">{{ card.back }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <div class="glass-card p-5 border-0 shadow-sm text-center bg-white">
                <h3 class="fw-bold mb-2">üó∫Ô∏è Your Mastery Roadmap</h3>
                <p class="text-muted mb-5">Follow these steps to ensure you never forget this topic.</p>
                
                <div class="d-flex flex-column flex-lg-row justify-content-around align-items-center gap-4 position-relative">
                    <div class="roadmap-item">
                        <div class="step-num shadow-sm">1</div>
                        <h6 class="fw-bold mt-3">Review Notes</h6>
                        <p class="small text-muted">Read the shorthand notes once now and once before bed.</p>
                    </div>
                    <div class="roadmap-arrow d-none d-lg-block"><i class="fa-solid fa-chevron-right"></i></div>
                    
                    <div class="roadmap-item">
                        <div class="step-num shadow-sm bg-success">2</div>
                        <h6 class="fw-bold mt-3">Active Recall</h6>
                        <p class="small text-muted">Go through all flashcards until you get 100% correct.</p>
                    </div>
                    <div class="roadmap-arrow d-none d-lg-block"><i class="fa-solid fa-chevron-right"></i></div>

                    <div class="roadmap-item">
                        <div class="step-num shadow-sm bg-primary">3</div>
                        <h6 class="fw-bold mt-3">Mastery Test</h6>
                        <p class="small text-muted">Generate a quiz on this topic to verify your knowledge.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    :root { --primary-gold: #FFB300; }
    .border-top-gold { border-top: 6px solid var(--primary-gold) !important; }
    
    /* Roadmap Styling */
    .roadmap-item { width: 250px; text-align: center; }
    .step-num { 
        width: 50px; height: 50px; line-height: 50px; 
        background: var(--primary-gold); color: white; 
        border-radius: 50%; margin: 0 auto; font-weight: bold; font-size: 1.2rem;
    }
    .roadmap-arrow { font-size: 1.5rem; color: #dee2e6; }

    /* Flashcard Styling */
    .flashcard { perspective: 1000px; height: 250px; cursor: pointer; }
    .flashcard-inner {
        position: relative; width: 100%; height: 100%;
        text-align: center; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
    }
    .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
    .flashcard-front, .flashcard-back {
        position: absolute; width: 100%; height: 100%;
        backface-visibility: hidden; border-radius: 25px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    }
    .flashcard-front { background: #ffffff; color: #333; display: flex; align-items: center; justify-content: center; border: 1px solid #eee; }
    .flashcard-back { background: linear-gradient(135deg, #FFB300, #FFD700); color: white; transform: rotateY(180deg); }

    /* Custom Scrollbar for Flashcards */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #FFB300; border-radius: 10px; }

    .glass-card { background: rgba(255, 255, 255, 0.95); border-radius: 25px; }
    
    @media print {
        .btn, .roadmap-arrow, .text-muted { display: none !important; }
        .flashcard-back { position: relative !important; transform: none !important; color: black !important; background: #f9f9f9 !important; border: 1px solid #ddd; margin-top: 10px; }
    }
</style>
{% endblock %}